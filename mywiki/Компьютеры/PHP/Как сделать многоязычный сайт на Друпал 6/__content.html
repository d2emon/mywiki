<!DOCTYPE html>
<HTML>
<HEAD>
	<META HTTP-EQUIV='CONTENT-TYPE' CONTENT='TEXT/HTML; CHARSET=UTF-8'/>

	<STYLE type="text/css">
		body, div, p, table {
			font-size:10pt;
			font-family:Verdana;
		}

		img{border:none}
		
	</STYLE>
	
</HEAD>

<BODY>
<P>
<H1>Как сделать многоязычный сайт на Друпал 6</H1></P>

<P>Делаю многоязычный сайт на друпал.</P>

<P>Первым делом включаю нужные мне модули: Locale и Content Translation. Модули идут из коробки.</P>

<P>Следом доставляю дополнительные модули для поддержки многоязычности. Начать нужно как минимум с i18n. В admin/build/modules появится раздел Multilaguage в котором следует включить модули, которые должны пригодится. Для меня это на первый взгляд все, кроме Poll aggregate и Profile translation.</P>

<P>Затем правлю settings.php для поддержки многоязычности базовых переменных сайта:</P>

<P><CODE>
<BR>$conf['i18n_variables'] = array(
<BR>  // Site name, slogan, mission, etc..
<BR>  'site_name',
<BR>  'site_slogan',
<BR>  'site_mission',
<BR>  'site_footer',
<BR>  'anonymous',
<BR>  // Different front page for each language
<BR>  'site_frontpage',
<BR>  // Primary and secondary links
<BR>  'menu_primary_links_source',
<BR>  'menu_secondary_links_source',
<BR>  // Contact form information
<BR>  'contact_form_information',
<BR>  // For theme variables, read more below
<BR>  'theme_settings',
<BR>  'theme_garland_settings',
<BR>);
<BR></CODE></P>

<P>Следом добавляю языки, на которых будет говорить мой сайт. Это Английский (основной, уже есть), Немецкий и Французский. Языки добавляются на странице админки admin/settings/language.</P>

<P>Настраиваю нужные мне типы контента на многоязычность - для каждого типа контента, который нуждается во многоязычности, нужно включить эту самую многоязычность.</P>

<P>После включения модулей, добавления языков и конфигурирования типов контента можно лицезреть многоязычные настройки в нужных местах (cck, блоки, вьюсы и т.д.).</P>

<P>Создаю многоязычный контент. Для девелоперской версии вполне сгодится метод google translate.</P>

<P>Иду в блоки и включаю блок переключателя языков.</P>

<P>И тут меня ждала засада: блок ну ни как не хотел работать как я ожидал - переключал куда угодно и как угодно.</P>

<P>Попутно вылезли дикие глюки с путями в pathauto. Долгое гугление и пляски с бубном ничего толкового не дали, пока я не решился переключится на одну из стандартных тем. И о чудо - всё заработало.</P>

<P>
<H2>Алгоритм создания многоязычного сайта на Drupal</H2></P>

<P>
<OL>
<LI>Качаю модуль Internationalization</LI>
<LI>Правлю settings.php (см. выше)</LI>
<LI>Иду в /admin/build/modules и включаю модули Core->Content translation, Core->Locale, Multilanguage->чего там мне нужно для сайта</LI>
<LI>Добавляю языки в /admin/settings/language/add</LI>
<LI>Настраиваю метод выборки контента и показ многоязычных ссылок /admin/settings/language/i18n</LI>
<LI>Конфигурирую метод, которым Друпал будет определять, как работать с многоязычностью в /admin/settings/language/configure</LI>
<LI>Настраиваю типы контента до нужной мне многоязычности в /admin/content/types/list</LI>
<LI>При необходимости подкручиваю вьюсы и блоки</LI>
<LI>Включаю блок переключения языков (/admin/build/block/list), при необходимости подкручиваю тему напильником</LI>
<LI>Создаю многоязычный контент</LI>
<LI>Наслаждаюсь сайтом</LI>
</OL></P>
</BODY>
</HTML>