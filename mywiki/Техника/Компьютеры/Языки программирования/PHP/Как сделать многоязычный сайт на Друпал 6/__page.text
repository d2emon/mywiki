!! Как сделать многоязычный сайт на Друпал 6

Делаю многоязычный сайт на друпал.

Первым делом включаю нужные мне модули: Locale и Content Translation. Модули идут из коробки.

Следом доставляю дополнительные модули для поддержки многоязычности. Начать нужно как минимум с i18n. В admin/build/modules появится раздел Multilaguage в котором следует включить модули, которые должны пригодится. Для меня это на первый взгляд все, кроме Poll aggregate и Profile translation.

Затем правлю settings.php для поддержки многоязычности базовых переменных сайта:

@@
$conf['i18n_variables'] = array(
  // Site name, slogan, mission, etc..
  'site_name',
  'site_slogan',
  'site_mission',
  'site_footer',
  'anonymous',
  // Different front page for each language
  'site_frontpage',
  // Primary and secondary links
  'menu_primary_links_source',
  'menu_secondary_links_source',
  // Contact form information
  'contact_form_information',
  // For theme variables, read more below
  'theme_settings',
  'theme_garland_settings',
);
@@

Следом добавляю языки, на которых будет говорить мой сайт. Это Английский (основной, уже есть), Немецкий и Французский. Языки добавляются на странице админки admin/settings/language.

Настраиваю нужные мне типы контента на многоязычность - для каждого типа контента, который нуждается во многоязычности, нужно включить эту самую многоязычность.

После включения модулей, добавления языков и конфигурирования типов контента можно лицезреть многоязычные настройки в нужных местах (cck, блоки, вьюсы и т.д.).

Создаю многоязычный контент. Для девелоперской версии вполне сгодится метод google translate.

Иду в блоки и включаю блок переключателя языков.

И тут меня ждала засада: блок ну ни как не хотел работать как я ожидал - переключал куда угодно и как угодно.

Попутно вылезли дикие глюки с путями в pathauto. Долгое гугление и пляски с бубном ничего толкового не дали, пока я не решился переключится на одну из стандартных тем. И о чудо - всё заработало.

!!! Алгоритм создания многоязычного сайта на Drupal

# Качаю модуль Internationalization
# Правлю settings.php (см. выше)
# Иду в /admin/build/modules и включаю модули Core->Content translation, Core->Locale, Multilanguage->чего там мне нужно для сайта
# Добавляю языки в /admin/settings/language/add
# Настраиваю метод выборки контента и показ многоязычных ссылок /admin/settings/language/i18n
# Конфигурирую метод, которым Друпал будет определять, как работать с многоязычностью в /admin/settings/language/configure
# Настраиваю типы контента до нужной мне многоязычности в /admin/content/types/list
# При необходимости подкручиваю вьюсы и блоки
# Включаю блок переключения языков (/admin/build/block/list), при необходимости подкручиваю тему напильником
# Создаю многоязычный контент
# Наслаждаюсь сайтом

