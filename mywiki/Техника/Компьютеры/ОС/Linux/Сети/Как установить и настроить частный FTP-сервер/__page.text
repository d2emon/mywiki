!! Как установить и настроить частный FTP-сервер

[>
Недавно мне пришлось устанавливать Linux из под Windows, по локальной сети из двух машин, на старенькую машину без CD...
<]

Дмитрий Никущенко (satg@alpha.mhi.iuf.net)

!!! Инсталляция Linux по локальной сети.

У нас на работе появился новый, современный компьютер, а старенькая машина перекочевала в дальний угол. Правда ее соединили с первой коаксиальным кабелем, и берут некоторые данные, но в основном она простаивает. Тут появилась идея установить на нее Linux и в свободное время осваивать его. Итак имеются две машины с OS Windows98, соединены через сетевые карты, протокол NetBEUI.

На одной CD устройство, на второй его нет. Снять с первой машины CD невозможно, так как она на гарантии и системный блок под пломбами, а взять взаймы негде, поэтому установка с локального CD отпадает. В FAQ по Linux описаны разные способы инсталляции в том числе и по FTP. Решил попробовать этот вариант.

Подготавливаю старую машину для установка Linux, для этого на одном из ее дисков стираю разный хлам. Удалось высвободить 600 Mb и при помощи Partition Magic выделяю для Linux основной и swap разделы. Устанавливаю на обеих машинах TCP/IP протокол. Адресация для локальной сети рекомендуется в диапазоне 192.168.X.X.
Поэтому первой машине задаю адрес 192.168.9.1
другой 192.168.9.2
маска 255.255.255.0

Проверяю связь между ними, друг друга по сети видят. Создаю загрузочный диск с образа Bootnet.img из дистрибутива RedHat 6. Теперь необходимо первую машину сделать FTP сервером. После поисков в INet, нашел несколько FTP серверов для Windows. Попробовал их, и выбрал GuildFTPd последней версии 0.999.9, потому что он бесплатный, небольшой и имеет отличный Help. Установил на первую машину с CD устройством. Настройка основных параметров сервера (номер порта, максимальное количество коннектов, количество коннектов с каждого ip и др) осуществляется в правом нижнем окне. Если это сделать для группы System, то все группы нижнего уровня эти настройки унаследуют. Создаем группу Anon c правом входа anonymous.
Делаем ссылку на корень CD. т.е Local Path = "E:\",
@@
Virtual Path = "/".
Ip mask 192.168.9.1
@@
Admin -> Options -> Server: вписываю имя RedHat, и несколько уменьшаю детализацию сообщений сервера (передвинув бегунок "Log Level" влево), иначе файлы журнала быстро наберут сотни мегабайт:
Admin -> Option -> Advanced Settings -> Nic =0, в правом поле будет подсвечен Ip=192.168.9.1
Сервер готов к работе, для его запуска/выключения нажать кнопку "on", или выбрать меню Admin -> Allow Logins.

Со второй машины проверяю доступ к CD диску, в командной строке набираю:
@@
Ftp -o 192.168.9.1
@@

Идут сообщения: Server - RedHat, потом приветствие, которое можно набрать в GuildFTPd;
запрашивается имя - anonymous, пароль - адрес почтового ящика.
Далее: Ls -l, все читается. Пробую что нибудь скачать: get readme.txt. Файл перекачался. Можно проверить FTP сервер FAR или WinComander. Теперь вставляю загрузочную дискету в эту же машину, перезагружаюсь. Язык English
клав en
установка по FTP
сетевая карта Ne1000, 2000 compatibility
IRQ 5, adr =0x320
Нажимаю Alt+F4 и читаю
Ne*000 ethrcard probe at 0x320:00 80 c8 2d 4f 90
Ne2000 fond at 0x320 using irq 5
Нажимаю Alt+F1 и Ok
Ip adr = 192.168.9.2 далее значения выставил Linux
netmask 255.255.255.0
Def gateway 192.168.9.1
Primary NetServer 192.168.9.1
после OK заполняю сам
FTP site name: 192.168.9.1
RedHat directory: (один пробел)
OK.

появляется сообщение, что загружается \RedHat\base\netstg2.img Затем пошли вопросы по инсталляции, на которые я ответил.
Прошло 15 минут и Linux стоит на второй машине. Перезагружаюсь в Linux, затем в Windows.
Все работает.
Я думаю этот вариант инсталляции может подойти и для Notebook без CD устройств.
У меня проблемы возникли с сетевой картой DE 220 ISA, почему-то драйвер "ne" отсутствовал в дистрибутиве RedHat 7.1, пришлось использовать RedHat 6.2. Затем сетевая карта не хотела работать через порт 0x300, хотя в Windows стоит этот порт, IRQ 10 тоже не понравился.

Вот и все, Сергей.

Литература из Inet: В.А.Костромин "ОС Linux на Вашем персональном компьютере" ;

При перепечатке ссылка на www.linuxrsp.ru обязательна.