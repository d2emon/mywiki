!! Игровая механика: давайте разберём ядро игры по косточкам

Термин «игровая механика» имеет много значений, но сегодня я буду говорить об игровой механике как об абстракции, определяющей состояние игры. Очень упрощённо это выглядит вот так:

Attach:3701d7c2290e03b4ffe19ce09344b89d.png

Есть только два фактора, которые определяют любое текущее состояние игры: механика (правила) и игроки своими действиями. 

!!! Уровень ядра

!!!! Такт 1: определение состояния
Всегда есть некое текущее состояние системы (например, начало хода). Оно определяется на первом такте инициализирующей последовательностью, когда игроки «загружают» игру, раскладывая поле, выбирая фишки, распределяя начальные ресурсы и так далее. Затем оно меняется в зависимости от происходящего в игре.

[>
!!!!! Состояние игры в шахматах

В шахматах у нас всегда есть положение фигур на доске и всегда известно, чей сейчас ход. Начальная расстановка фигур определяется правилами игры, все остальные состояния – тем, как игроки будут двигать свои фигуры. Возможны только те состояния, которые достижимы при соблюдении правил. Пример ошибки – 5 королей на доске.
<]

!!!! Такт 2: игроки оценивают состояние для принятия решений
После обновления состояния игры есть такт, во время которого игроки принимают решения на основе новой информации. 

!!!! Такт 3: игроки выполняют действия
На этом шаге игроки меняют состояние игры, делая что-то в соответствии с правилами, например, двигая фигуру. 

!!!! Такт 4: сама игра даёт обратную связь
В шахматах этого нет, но, например, если бы мы играли в кости, игра сгенерировала бы нам несколько случайных чисел на кубиках для нового состояния. 

Выход из цикла делается по соответствии одному из критериев окончания алгоритма, то есть, например, вашей победе.

Ещё раз: игроки на основе анализа состояния принимают решение о своих действиях, выполняют эти действия, взаимодействуют с другими игроками и правилами, а затем устанавливают игру в новое состояние. Игра может делать часть работы сама независимо от действий игроков. Например, в Стартапе каждый ход открывается карточка со случайным событием.

!!! «SDK»

Игровая механика состоит из своего рода генов — известных последовательностей действий, которых не очень-то много. Новые гены появляются в настольном мире всего пару раз в год, и далеко не все приживаются. Вот так выглядит текущий список по версии BGG (это довольно условное разделение, так как классификация не очень чёткая):

Attach:5cef48c7caf565d1d11f3a38702e541a.png

Например, Монополия – это сочетание механики ставок, «кинь кубик и сдвинься», сбора набора и торгов. На уровне сеттинга вы покупаете недвижимость и конкурируете, на уровне механики – двигаетесь по полю, собираете наборы карточек и делаете ставки фишками. 

Без механики было бы непонятно, как торговать недвижимостью – механика свела это до манипуляции ставками и карточками, а игроки представили всё остальное уже на других уровнях. 

Механика практически всегда является абстракцией, никак не связанной с игровым сеттингом и сюжетом. Например, в настольной «Игре престолов» совершенно не важно кто и чем ходит. Можно совершенно спокойно из «Игры престолов» сделать игру про Великую Отечественную войну. 

%thumb%Attach:aa8bd9aa33dc304c8ca20c1e4440e0fc.jpg%%
Настольная Angry Birds – это эволюция Городков. Общая механика – бросание предметов. Отличная механика именно под этот сеттинг. В первом случае надо битой по чуркам, во втором – птицами по свиньям. Первая игра стоит 350 рублей, вторая больше 1000. Механика одинаковая, но сеттинг разный — и угадайте, что продаётся лучше.

!!! «GUI»

Когда механика сочетается с сеттингом, она работает куда лучше. Например в «Космических дальнобойщиках» метеорит, попавший слева в открытый шлюз – это уничтожение модуля. Это легко представить и легко исполнить, не заглядывая в правила. 

Поэтому важный принцип хорошей механики – это соответствие тех действий, которые она диктует, тому, что по этому поводу ожидают игроки. 

[>
!!!!! Пример

В MTG есть система стека действий, и до определённой редакции боевые повреждения заносились в стек, а потом резолвились. Если поверх повреждений в стеке окажется, например, заклинание отзыва в руку, то игроки увидят странную с точки зрения реалистичности ситуацию:
1. Два существа встретились в бою (в стек ушли повреждения).
2. Игрок А сыграл отзыв (в стек ушло заклинание отзыва).
3. Игрок Б спасовал.
4. Из стека отрезолвился первый объект (существо игрока А вернулось в руку).
5. Из стека отрезолвился второй объект (повреждения по существам, но поскольку первого на столе уже нет – только по существу игрока Б).

Получилось, что несуществующее уже существо убило кого-то. Повреждения в стеке были крайне элегантны с точки зрения общей механики игры, но было сложно объяснить начинающим игрокам, почему их существо ушло на кладбище в такой ситуации. Поэтому разработчики в какой-то момент были вынуждены резолвить повреждения в бою мимо стека, чем срезали часть глубины тактики, но улучшили «интерфейс» игры.
<]

Очевидно, что сеттинг очень помогает объяснению механики и её естественному взаимодействию с пользователем. Например, «Шакал» — это вообще-то игра про взвешенный граф, но игроки ходят по острову и ищут сокровища. С точки зрения механики совпадение координат фигур приводит к уничтожению одной из них и созданию нового объекта в заданной точке, а с точки зрения игрока один пират бьёт другого, и пострадавший возвращается на свой корабль. Если бы механика при этом создавала двух пиратов на корабле, было бы крайне сложно объяснить в сеттинге, почему так – и потребовался бы какой-то другой интерфейс. 

Да, вы правильно поняли: от механики зависит реалистичность действий в рамках сеттинга. Например, можно играть в экономический симулятор биржи со всеми сложностями, а можно ту же игру про биржу издать в виде механики «кинь кубик и сдвинь фишку». Понятно, что второй вариант – это не то, что вы ждёте от экономического симулятора.

%thumb%Attach:a7a3d0c3c9181a99fa6a87a04c2e30fd.jpg%% 
Одинаковый сеттинг при разных механиках: игра с полем и другая игра на картах

Ещё одна важная вещь – механика создаёт общий язык правил, которому подчиняются игровые события. При этом она вносит ограничения в модель, которые не всегда хороши. 

[>
!!!!! К чему приводит неожиданное ограничение модели

Первый раз, когда я начал играть в «S.T.A.L.K.E.R», полчаса бродил по деревне, слушал музыку у костра, говорил с Сидоровичем и другими персонажами. До этого я читал про мегареализм — и он действительно потрясал. А потом я вышел из первой «мирной» локации и нашел труп сталкера. И естественным образом понёс его в деревню, чтобы похоронить по-человечески. А он там никому нафиг не сдался – и я как дурак ходил с телом и приставал к NPC, которые просто не меняли реакции. При этом в игре была механика переноски тела, которая и сформировала ожидание того, что с ним что-то можно сделать. Если бы тело нельзя было поднять — разочарования не было бы, это ведь уже принятая условность.
<]

!!! Оптимизация

Мы играем, чтобы получать удовольствие. Его можно получать от самой игры, решений в её процессе, общения с другими игроками, созерцания арта (как в Имаджинариуме), победы и кучи других вещей. [[Вот тут есть немного деталей. -> http://habrahabr.ru/company/mosigra/blog/176801/]] 

Самое главное в механике – это определение «точки кайфа». Грубо говоря, это те действия, которые вызывают у игрока химическую реакцию организма. Проще говоря – то, что игрок будет с удовольствием повторять и повторять снова (в этом и есть суть игры – получать удовольствие). Очевидно, любая точка кайфа должна лежать за пределами игры – иначе в этой игре просто не было бы смысла. 

[>
!!!!! Точки кайфа в шахматах

В шахматах самая яркая такая точка – понимание замысла противника и принятие контрмер. Удовольствие вы получаете от того, что разгадали план оппонента и оказались умнее его. Следующая по важности там же точка – это получение преимущества на поле, например, взятие фигуры. Важно, что профессиональные игроки радуются не именно взятию фигуры, а некоему сочетанию параметров на поле. Но для начинающих важно именно снять слона соперника с доски: тут включается и физическое действие, и мини-ритуал, и на глаз видно прогресс: у меня слонов два, а у тебя – уже один. 

Когда мастер игры неожиданно встретит равного, это тоже будет точкой кайфа – и это тоже лежит за пределами самой игры и механики. И всё же главное удовольствие в шахматах, как и во всех настольных играх – это просто общение между двумя людьми. Игра – это что-то вроде протокола такого общения.
<]

Некоторые детские игры скучны и непонятны для взрослых. Дело в том, что маленьких детей может дико переть просто от процесса поиска картинок в куче, трогания и перемещения предметов и так далее. Их удовольствие может лежать даже в моторике: ребёнку очень нравится делать что-то небольшое, что сразу серьёзно изменяет состояние игры (так он понимает, что может воздействовать на окружающий мир). Например, падение деревянной башни из брусков в Дженге – это настоящее чудо, вызывающее кучу визга.

!!! Кооперативная игра

Средний игрок любит видеть своё воздействие на игру. В кооперативных настольных играх игроки режутся против «игрового поля», например, стараясь завалить босса за ограниченное количество ходов. 

Если игроков трое, то один из них может легко выпасть из процесса принятия решений: фактически, его фишкой будет рулить сильный лидер. Это важно для семейных игр, где мама не очень хочет разбираться в игре, а просто хочет видеть сына за столом, рядом, с горящими глазами и без компьютера. Но это плохо для игр, которые рассчитаны именно на нормальных игроков. Поэтому хорошо, если каждый из игроков хоть раз за игру сможет принять решение, которое будет воздействовать на ситуацию в целом. 

!!! Тонкий момент с балансом

Игроки не всегда любят играть хардкорно и всерьёз, поэтому если такая точка принятия решения будет лежать слишком рано, например, в первых ходах, то ошибка приведёт к потерянному времени и расстройству. Если точка принятия решения будет лежать в конце партии, например, на последнем ходу, то можно смело выкидывать все предыдущие. Поэтому обычно решений несколько, скажем, 2-3-7 за игру, и каждое из них продвигает к победе. И ещё это помогает прощать некоторые ошибки игроков.

!!! Реализм против удобства

Довольно часто мы тестируем игры, и одна из самых частых ошибок у почти всех начинающих авторов (как и у нас самих когда-то) – это излишнее усложнение, причём в большинстве случаев – в угоду детализации мира и сеттинга. 

Как я уже говорил, в Half-Life вы вряд ли будете когда-нибудь развязывать шнурки, снимать обувь с ног и шевелить пальцами, чтобы они отдохнули. Но человек (а мы ведь думаем, что играем за человека!) может так сделать. И разработчики могут решить, что стоит добавить эту функцию. И ещё сотню других на всякий случай. Чем это кончится, легко представить. Поэтому задача – определить моменты, которые приносят игрокам то или иное удовольствие, а затем безжалостно вырезать остальные, не ведущие напрямую к точкам кайфа. 

[>
!!!!! Пример

В первой версии Стартапа у нас была оплата офиса. Позже при перерасчёте ресурсов времени и внимания после турниров выяснилось, что это рутина, от которой можно смело отказаться: и мы сэкономили немного внимания игроков, плюс сократили ход на 10-12 секунд.
<]

Теперь вернёмся к вопросу нагрузки на ресурсы игрока (время и внимание). С точки зрения внимания должен быть достаточно чёткий локус: основная последовательность, за которой нужно следить. 

Когда механика помогает интуитивно понятно делать основные действия, локус перемещается не на реализацию правил, а на принятие решений. А ещё позже – на обдумывание стратегии в целом. Это как вождение: сначала механическая коробка передач будет вашим главным врагом, а позже вы научитесь управляться с ней на автопилоте и будете смотреть на дорогу.

Самый простой вопрос анализа ресурса внимания – это «Сколько раз думать и сколько раз решать?». Например, видя три хода противников, придётся думать три раза о том, что каждый из них задумал. Решать же придётся только один раз – куда послать своё войско, например. 

Тут же полезно считать аптайм, то есть время, когда игрок что-то делает. Частая ошибка – стратегия с длинными ходами, когда другой игрок сидит и смотрит (то есть в его картине мира ничего не меняется). Есть примеры работающих игр с диким даунтаймом – масштабные стратегии типа «Сумерек империи», где ожидание конца хода других игроков скрашивается возможностью договариваться о союзах. Ещё пример – та же «Игра престолов», где игроки делают ходы одновременно, а потом просто резолвят стек приказов: вместо N-1 периодов даунтайма для N игроков гейм-дизайнер сделал всего один, но немного дольше стандартного. Чертовски красиво. 

[>
!!!!! Механика управления бойцом в XCOM

Я уже сравнивал [[в одном из прошлых топиков -> http://habrahabr.ru/company/mosigra/blog/169073/]] модель движения бойцов в компьютерном первом XCOM и новом UFO. Напомню: в первой игре вам надо учитывать время (разбитое на единицы), энергию, примерно прикидывать траекторию движения и считать клетки, делать оценку того, сколько времени останется после движения на выстрел и так далее. В новом модель упрощена – теперь вы сразу видите зону, куда боец может добежать до выстрела, не нужно делать никаких расчётов. Можно просто взять и побежать. Первая модель более хардкорна и реалистична (и доставляет кайф любителям сложных игр), вторая позволяет сосредоточиться именно на тактике истребления пришельцев. Обе, разумеется, имеют свои недостатки. Задача гейм-дизайнера – сделать так, чтобы неизбежные недостатки моделирования в рамках настольной игры не влияли на удовольствие от игрового процесса.
<]

!!! Мастерство в игре

Следующий вопрос – это то, как механика относится к росту опыта игрока. Например, в шахматах решает только опыт игрока. В русской рулетке опыт не решает вообще. 

Если игра нацелена на средний сегмент, можно сделать вот что:

* '''Дать новичку призрачный шанс победить опытного товарища.''' Например, в настольном MTG это решается системой «камень-ножницы-бумага»: есть три архетипа стратегии, и «агрессия», встретившая «контроль», выиграет с очень высокой вероятностью. Как в Старкрафте: ранний зерграш без раздумий «а что будет, если не выйдет» может позволить победить более опытного товарища.
* '''При этом – должен быть баланс, чтобы опытным игрокам было интересно играть между собой.''' Возвращаясь к MTG – есть система сайдборда, то есть модификации деки под противника между раундами.
* '''Большой вопрос балансировки – это роль случайности.''' Когда она превращается в статистику (как в карточных играх) – это хорошо. Когда она становится основой действия, как в русской рулетке – это не вызывает радость от самой механики уже со второй партии. Радость могут вызывать другие слои игры – но не возможность влиять на её состояние, поскольку обратная связь будет случайна.
* '''Хорошо, если игра реиграбельна с теми же людьми.''' Например, шахматы обладают почти бесконечным запасом регирабельности, а вот Данетки – практически никаким, потому что карточки скоро кончаются. Но при этом Данетки продаются лучше шахмат, потому что обеспечивают более быстрые эмоции и не имеют порога входа.

!!! Кривая развития игрока

Успех или неуспех игры во многом определяется тем, насколько она затягивает игроков. Давайте посмотрим на 3 компьютерные игры: 

* '''«Змейка».''' Здесь очень простой вход – у вас всего две кнопки, интуитивно понятно, что делать. Сначала вы осваиваете движение змейкой, потом учите общие правила (ага, собранные точки удлиняют мою змею!), потом повышаете мастерство (точнее управляете змеюкой и можете позволять себе делать развороты на 180 градусов), затем пробуете набрать максимальный счёт. Всё просто и понятно. Если есть другие игры – эта надоест быстро.
* '''Jagged Alliance 2.''' Здесь вы сначала прогружаетесь по атмосфере игры (читаете про наёмников, листаете отчёт разведки), а потом проходите серию боёв. Сложность увеличивается постепенно: первый город встречает вас оболтусами с пистолетами. Количество стволов, людей в отряде, функций и как следствие — доступных тактик растёт по мере обучения и прохождения. В конце вас ждёт самый тяжелый бой. Самое сложное – иногда отрываться от игры и не забывать есть. Весь процесс построен так, что у вас постоянно появляются новые возможности (стволы, наёмники), которые хочется опробовать в бою, новые повороты сюжета, новые стимулы двигаться дальше. Игра даёт отличную обратную связь. Очень похож путь игрока в Fallout 2 (обучение, усложнение, постепенное раскрытие возможностей и сюжета).
* '''Вангеры.''' Эта игра сразу взрывает вам мозг и погружает в новый мир. Непонятные слова Липкого, какой-то кислотный ад на поверхности, безумное движение всего подряд, освоение свойств своего мехоса… В общем, только через пару часов у вас сложится картина мира. Которую вам тут же перевернут, а потом перевернут ещё и ещё раз – в общем, вы до второго прохождения будете в постоянном когнитивном диссонансе. Безумо клёво, но создаёт огромный порог входа.

!!! Настройка на игроков

Самое главное для успеха игры (то есть продаж) – это подстройка под аудиторию. 

%thumb%Attach:873ee7c76d89e0c63a498a9055e6c8f5.jpg%% 
Одинаковый сеттинг и почти одинаковая механика при разном арте (настройка на взрослых с рисованным артом и игроков-детей с 3D):

Вот вопросы, ответы на которые нужно понять до финальной заточки:

* Кто будет играть? Мальчик или девочка, семейная пара или друзья, коллеги или хардкорные гики? Сколько людей будет играть? Что им нравится, что нет?
* Где будет играть? В поезде, в самолёте, в спокойной обстановке за столом, на пикнике? Будет ли у них 2-3 часа без звонков телефонов, например?
* Как будет играть и с кем? Как часто покупатель игры сможет собрать для неё компанию? Не получится ли так, что в городе будет всего 10 человек, которые умеют играть на нужном уровне?
* Как будут идти турниры? Что поменяется? Нужно ли будет избавляться от части случайностей, чтобы не попасть под категорию азартной игры в разных странах?
* А что у нас для гиков? Есть что-то такое, чем можно наслаждаться годами?
* Будут ли продолжения? Как они интегрируются с игрой? Как будет с балансом в этом случае?
* Как учить игре? Можно ли разобраться по правилам или нужен тот, кто играл?
* Можно ли в магазине объяснить основные вещи про игру за 30 секунд – или придётся долго копать на сайте, чтобы сделать выбор?

!!! Перенос механик

Большая часть механик имеет прямые аналоги в платформенных играх. Более того, как правило, «точки кайфа» настольных игр настолько ярко акцентированы, что даже простое портирование игры позволяет ей выбиться в хиты. В Аппсторе, например, невероятно много настолок.

Как было видно на примере Angry Birds, некоторые компьютерные игры и приложения под телефоны-планшеты тоже переносятся в настольный формат. Например, есть «порты» Старкрафта, MOO, Варкрафта, Цивилизации, Doom и так далее.

!!! Важность механики

Игроки в конце партии оценивают для себя: «Это было круто?». Если да – то можно продолжать играть и можно рассказывать другим про эту настолку. 

Attach:74f24104480b4fcdb9fb37e7b48e4ad8.png

Соответственно, механика становится важной не для продажи в магазине и не для стадии анонса игры (здесь больше решает арт и маркетинг), а для продаж после первых тысяч экземпляров, когда поигравшие люди будут уже приходить в магазины за новыми коробками. 

Механика определяет «вирусность» игры больше, чем арт, сюжет, атмосфера, детали сеттинга и так далее, и именно это важно для опытных игроков.

Уф. Если вы дочитали, спасибо. Не очень хотел писать такой длинный топик, но обещал.
